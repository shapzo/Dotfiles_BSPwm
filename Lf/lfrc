# ~/.config/lf/lfrc

# Sets
set shell zsh
set icons
set number
set scrolloff 10
set relativenumber
set drawbox true
set dircounts true
set dircounts_size 1000000
set dirfirst true
set ignorecase true
set incsearch true

# Open file's (GUI)
map <enter> $xdg-open $f

# Opne file's
cmd open &{{
    case "$f" in
        *.pdf) evince "$f" &;;
        *.jpg|*.jpeg|*.png|*.gif) eog "$f" &;;
        *.mp4|*.mkv|.*wma) mpv "$f" &;;
        *.mp3|*.flac) lollypop "$f" &;;
        *.txt|*.md) gnome-text-editor "$f";;  # Neovim para textos
        *) xdg-open "$f" &;;  # Fallback para otros tipos
    esac
}}

# Functions

# Rename
cmd rename &{{
    old_name="$f"
    new_name=$(mktemp)
    echo "$old_name" > "$new_name"
    "$EDITOR" "$new_name"
    new_name=$(cat "$new_name")
    rm "$new_name"
    if [ -n "$new_name" ] && [ "$old_name" != "$new_name" ]; then
        mv "$old_name" "$new_name"
    fi
    clear
}}

# Make dir's
cmd mkdir &{{
    printf "Directory name: "
    read name
    mkdir -p "$name"
    lf -remote "send $id cd \"$name\""
    clear
}}

# Paste
cmd yank-path &{{
    echo -n "$PWD/$f" | xclip -selection clipboard
    echo "Ruta copiada: $PWD/$f"
}}

# Seacrh fzf
cmd search &{{
    file=$(find . -type f | fzf --preview 'bat --color=always {}')
    [ -n "$file" ] && lf -remote "send $id select \"$file\""
}}

# shortcuts

# Sistema
cmd q quit
map space $open $f

#navegation
map j up
map k down
map gg go-to-first
map G go-to-last

map e edit
map d delete
map D trash
map a mkdir
map r rename
map md move-to-new-dir
map mcd copy-to-new-dir
map x extract
map H set hidden!
map <c-r> reload

map V ${{ "$EDITOR" . }}

# Theme
set color dir "#7940e4"        # Directorios (púrpura)
set color link "#65518c"       # Enlaces simbólicos (púrpura oscuro)
set color exe "#BF616A"        # Ejecutables (rojo)
set color archive "#EBCB8B"    # Archivos comprimidos (amarillo)
set color media "#A3BE8C"      # Multimedia (verde)
set color text "#D8DEE9"       # Texto (gris claro)
set color border "#3B4252"     # Borde (gris oscuro)

# Temporal file's
set tmpdir ~/.cache/lf

# Zsh integration
cmd on-cd &{{
    echo "$PWD" > ~/.cache/lf/lastdir
}}

# confis
set previewer ~/.config/lf/preview.sh
set cleaner ~/.config/lf/cleaner.sh 
