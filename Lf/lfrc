# ~/.config/lf/lfrc

# Sets
set shell zsh
set icons
set number
set scrolloff 10
set relativenumber
set drawbox true
set dircounts true
set dircounts_size 1000000
set dirfirst true
set ignorecase true
set incsearch true

# Open file's (GUI)
map <enter> $xdg-open $f

# Opne file's
cmd open &{{
    case $(printf "%s" "$f" | tr '[:upper:]' '[:lower:]') in
        *.pdf) evince "$f" &;;
        *.jpg|*.jpeg|*.png|*.gif) eog "$f" &;;
        *.mp4|*.mkv|*.webm) mpv "$f" &;;
        *.mp3|*.flac) lollypop "$f" &;;
        *.zip|*.tar.gz|*.tgz|*.7z) atool -x "$f" ;; # Extraer
        *) xdg-open "$f" &>/dev/null &;;
    esac
}}

# Functions

# Rename
cmd rename &{{
    old_name="$f"
    new_name=$(mktemp)
    echo "$old_name" > "$new_name"
    "$EDITOR" "$new_name"
    new_name=$(cat "$new_name")
    rm "$new_name"
    if [ -n "$new_name" ] && [ "$old_name" != "$new_name" ]; then
        mv "$old_name" "$new_name"
    fi
    clear
}}

# Make dir's
cmd mkdir &{{
    printf "Directory name: "
    read name
    mkdir -p "$name"
    lf -remote "send $id cd \"$name\""
    clear
}}

# Paste
cmd yank-path &{{
    echo -n "$fx" | xclip -selection clipboard
    lf -remote "send $id echo Ruta copiada al portapapeles"
}}

# Seacrh fzf
cmd search ${{
    res=$(find . -maxdepth 2 | fzf --reverse --header='Saltar a:')
    if [ -n "$res" ]; then
        if [ -d "$res" ]; then
            lf -remote "send $id cd \"$res\""
        else
            lf -remote "send $id select \"$res\""
        fi
    fi
}}

# shortcuts

# Sistema
cmd q quit
map <enter> open

#navegation
map k up
map j down
map l open
map h updir

map v toggle

map yp yank-path
map f search

map gg go-to-first
map G go-to-last

map e edit
map d delete
map D trash
map a mkdir
map r rename
map md move-to-new-dir
map mcd copy-to-new-dir
map x extract
map H set hidden!
map <c-r> reload

map V ${{ "$EDITOR" . }}

# Theme
set color dir "#7940e4"
set color link "#65518c"
set color exe "#BF616A"
set color archive "#EBCB8B"
set color media "#A3BE8C"
set color text "#D8DEE9"
set color border "#3B4252"

# Temporal file's
set tmpdir ~/.cache/lf

# Zsh integration
cmd on-cd &{{
    echo "$PWD" > ~/.cache/lf/lastdir
}}

# confis
set previewer ~/.config/lf/scrips/preview.sh
set cleaner ~/.config/lf/scrips/cleaner.sh 
